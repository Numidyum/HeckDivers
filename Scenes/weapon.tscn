[gd_scene load_steps=8 format=3 uid="uid://c68gi8yelxwbl"]

[ext_resource type="AudioStream" uid="uid://h3rjucoprao5" path="res://Audio/GunSound.ogg" id="1_s6cbq"]
[ext_resource type="AudioStream" uid="uid://djqi7fewqjadj" path="res://Audio/For Liberty (Male).wav" id="2_qox2a"]
[ext_resource type="AudioStream" uid="uid://cijno5cuov0xy" path="res://Audio/Alien Scumbag (Male).wav" id="3_j3q0a"]
[ext_resource type="AudioStream" uid="uid://b4ppvbban2kih" path="res://Audio/For Super Earth (Male).wav" id="4_4pu0y"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5y5md"]
size = Vector2(3, 3)

[sub_resource type="GDScript" id="GDScript_ixelj"]
script/source = "extends CollisionShape2D

var canFire=true
var bullet=preload(\"res://Scenes/Bullet.tscn\")
@onready var gunshot = $Gunshot
@onready var taunt = $Taunt
@export_range(0,1) var tauntchance: float = .05


func _physics_process(delta):
	var mousePos=get_global_mouse_position()
	look_at(mousePos)


func shoot():
	if Input.is_action_just_pressed(\"Fire\") and canFire:
		print(Global.Ammo)
		gunshot.play()
		if  randf() < tauntchance:
			taunt.play()
		var bulletinstance=bullet.instantiate()
		bulletinstance.rotation=global_rotation
		get_parent().add_child(bulletinstance)
		bulletinstance
		canFire=false
		await get_tree().create_timer(0.2)
		canFire=true
		
func _process(delta):
	if Input.is_action_just_pressed(\"Fire\"):
		if Global.Ammo > 0:
			Global.Ammo -= 1
			shoot()
"

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_41324"]
streams_count = 3
stream_0/stream = ExtResource("2_qox2a")
stream_0/weight = 1.0
stream_1/stream = ExtResource("3_j3q0a")
stream_1/weight = 1.0
stream_2/stream = ExtResource("4_4pu0y")
stream_2/weight = 1.0

[node name="weapon" type="CollisionShape2D"]
shape = SubResource("RectangleShape2D_5y5md")
script = SubResource("GDScript_ixelj")

[node name="Marker2D" type="Marker2D" parent="."]

[node name="Gunshot" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("1_s6cbq")

[node name="Taunt" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_41324")
